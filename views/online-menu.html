<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–û–Ω–ª–∞–π–Ω –≥—Ä–∞</title>
  <link rel="stylesheet" href="/online-menu.css">
</head>
<body>

<header class="site-header">
  <div class="header-inner">
    <h1 class="site-title">üÉè Great Battle</h1>
    <div id="auth-bar" class="auth-bar"></div>
  </div>
</header>

<main class="main-content">
  <section class="mode-selection fade-in">
    <h1>–û–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º</h1>

    <button type="button" onclick="createGame()">–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –≥—Ä—É</button>

    <form method="POST" action="/play/online/join">
      <input name="gameId" placeholder="–í–≤–µ–¥—ñ—Ç—å ID –≥—Ä–∏" required>
      <br>
      <button type="submit">–ü—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è</button>
    </form>

    <button class="back-button" onclick="location.href='/play'">‚Üê –ù–∞–∑–∞–¥</button>
  </section>
</main>

<footer class="site-footer">
  <p>üîó –ó–≤ º—è–∑–æ–∫: <a href="https://t.me/Marshall949">@Marshall949</a>, <a href="https://t.me/danilbaz">@danilbaz</a>, <a href="https://t.me/MxmChb">@MxmChb</a></p>
</footer>

<script>
  function createGame() {
    console.log("–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∏...");

    fetch('/play/online/create', {
      method: 'POST'
    })
            .then(res => {
              console.log('–í—ñ–¥–ø–æ–≤—ñ–¥—å —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç—Ä–∏–º–∞–Ω–æ');
              return res.json();
            })
            .then(data => {
              console.log('JSON:', data);
              if (data.matchId) {
                console.log('–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –º–∞—Ç—á—É:', data.matchId);
                window.location.href = `/play/online/${data.matchId}`;
              } else {
                alert("–ü–æ–º–∏–ª–∫–∞: –º–∞—Ç—á –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ");
              }
            })
            .catch(err => {
              console.error("–ü–æ–º–∏–ª–∫–∞:", err);
              alert("–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –≥—Ä–∏");
            });
  }
</script>

</body>
</html>

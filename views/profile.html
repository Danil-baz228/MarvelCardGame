<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>

<form class="profile-edit" action="/profile" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="current_avatar_url" value="{{avatar_url}}">

    <div class="profile-avatar-block">
        <img id="avatarPreview" src="{{avatar_url}}" alt="–ê–≤–∞—Ç–∞—Ä">
        <button type="button" class="avatar-btn" onclick="document.getElementById('avatar').click()">üîÑ –ó–º—ñ–Ω–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä</button>
        <input type="file" name="avatar" id="avatar" class="avatar-file" accept="image/*">
    </div>

    <div class="profile-form">
        <input type="text" name="username" placeholder="–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞" value="{{username}}" required>
        <input type="email" name="email" placeholder="Email" value="{{email}}" required>
        <button type="submit">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>
</form>

<div class="back-link">
    <a href="/">‚¨Ö –ù–∞–∑–∞–¥</a>
</div>

<script>
    const avatarInput = document.getElementById('avatar');
    const preview = document.getElementById('avatarPreview');

    avatarInput.addEventListener('change', function () {
        const file = this.files[0];
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });
</script>

</body>
</html>
